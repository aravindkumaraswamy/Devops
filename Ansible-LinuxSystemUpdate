---

- Hosts: [LinuxServers]
  become: yes
  tasks:
  
   -name: Adding Repository for Ubuntu Machines
    apt_repository: repo='deb http://ubuntu-cloud.archive.canonical.com/{{ ansible_distribution | lower }} {{ ansible_distribution_release }}-updates/liberty main' state=present
    
   -name: Install system OS updates for centos systems
    yum: name=* state=latest update_cache=yes
    when: ansible_distribution == "CentOS", "Red Hat Enterprise Linux"

   -name: Install system OS updates for ubuntu systems
    apt: upgrade=dist update_cache=yes
    when: ansible_distribution == "Ubuntu"
     
     notify:
       -restart servers
       
    handlers:
     -name: restart servers
    service:
      -when: ansible_distribution == "CentOS", "Red Hat Enterprise Linux", "Ubuntu"
       state: restarted
   
